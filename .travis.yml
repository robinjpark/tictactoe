language: rust
cache: cargo

rust:
  - stable
  - beta
  - nightly

# The following matrix for adding clippy support was taken from:
# https://github.com/CAD97/great-ci/blob/master/.travis.yml
matrix:
  fast_finish: true
  allow_failures:
    - env: NAME='cargo-travis'
    - rust: nightly
  include:
    - rust: stable
      before_script:
        - rustup component add clippy
      script:
        - cargo clippy -- -D clippy::all

script: |
  cargo build --verbose &&
  cargo test  --verbose
