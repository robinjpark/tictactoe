language: rust
cache: cargo

# The following matrix for adding clippy support was inspired by:
# https://github.com/CAD97/great-ci/blob/master/.travis.yml
jobs:
  fast_finish: true
  allow_failures:
    - rust: nightly
  include:
    - rust: stable
      name: "Build and test on stable rust"
      script:
        - cargo build --verbose &&
          cargo test  --verbose
    - rust: beta
      name: "Build and test on beta rust"
      script:
        - cargo build --verbose &&
          cargo test  --verbose
    - rust: nightly
      name: "Build and test on nightly rust"
      script:
        - cargo build --verbose &&
          cargo test  --verbose
    - rust: stable
      name: "Clippy"
      before_script:
        - rustup component add clippy
      script:
        - cargo clippy -- -D clippy::all
